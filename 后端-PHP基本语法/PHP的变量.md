---
title: PHP的变量
date: 2019-12-04 17:39:58
categories: PHP
tags:
- PHP	
---

官网：PHP是PHP的递归首字母缩写：Hypertext Preprocessor，一种用于创建动态和交互式HTML网页的脚本语言。当网站访问者打开页面时，服务器处理PHP命令，然后将结果发送到访问者的浏览器。<!-- more -->

## 1.变量的声明及使用

- 变量的声明问题：和很多语言不同，在PHP中使用变量之前不需要声明变量（PHP4之前需要声明变量），只需为变量赋值即可。
- 变量名的要求：PHP中的变量名称用$和标识符表示，变量名是区分大小写的。 
- 变量的赋值：变量赋值，是指给变量一个具体的数据值，对于字符串和数字类型的变量，可以 通过“=”来实现。

```php
<?php $name = value; ?> 
```

- 对变量赋值时，要遵循变量命名规则：

```php
//合法的变量命名
<?php $thisCup="oink"; $_Class="roof "; ?> 
    
 //非合法的变量命名   
<?php $11112_var=11112;   //变量名不能以数字字符开头 $@spcn = "spcn";       //变量名不能以其他字符开头 ?> 

```

- 除了直接赋外，还有两种方式可为变量或赋值

## 2.变量作业域

**概述：**变量在使用时，要符合变量的定义规则。变量必须在有效范围内使用，如果变量超出有效 范围，则变量也就失去其意义了。变量的作用域如下表所示

| 作  用  域 | 说    明 |
| ---------- | -------- |
| 局部变量   |        	|
| 全局变量   |          |
| 静态变量   |          |

> 局部变量：在函数的内部定义的变量，其作用域是所在函数 



> 全局变量：被定义在所有函数以外的变量，其作用域是整个PHP文件，但在用户自定义函数内部是不可 用的。如果希望在用户自定义函数内部使用全局变量，则要使用global关键字声明  



> 静态变量：能够在函数调用结束后仍保留变量值，当再次回到其作用域时，又可以继续使用原来的值。 而一般变量是在函数调用结束后，其存储的数据值将被清除，所占的内存空间被释放。使用 静态变量时，先要用关键字static来声明变量，把关键字static放在要定义的变量之前  

（1）变量作用域说明：在函数内部定义的变量，其作用域为所在函数，如果在函数外赋值，将被认为是完全不同的另一个变量。在退出声明变量的函数时，该变量及相应的值就会被清除

```php
//实例一
<?php  
  $name = 'hanmeimei';
  function getName(){
      echo $name;
  }
 getName(); 
//运行结果显示name这个变量没有被定义。是因为php解析器没有在getName函数内部找到name这个变量的定义。为啥不去外面找去啊，如果没有特别的声明，函数内部引用到的变量只会在函数内部去找它的定义
?>
//实例二
<?php  
  $name = 'hanmeimei';
  function getName(){
      global $name;
      echo $name;
  }
 getName(); 
/*
这回就没有错误提示了，为什么呢？是因为在getName函数内部有一句global name,
它的意思是告诉PHP解析器name这个变量的定义你得在函数外面找，
然后就找到了name的值是hanmeimei。
变量前面的global使得name这个global型变量的作用范围扩大到了getName函数外部
*/    
?>

```

（2）静态变量的应用：在博客中使用静态变量记录浏览者的人数，每一次用户访问和离开时，都 能够保留目前浏览者的人数。在聊天室中也可以用静态变量来记录用户的聊天内容

```php
<?php
function zdy(){
	static $message = 0;					//初始化一个静态变量
	$message+=1;							//静态变量加1
	echo $message." ";						//输出静态变量
}
function zdy2(){
	$message = 0;							//声明函数内部变量(局部变量)
	$message+=1;							//局部变量加1
	echo $message." ";						//输出局部变量
}
for($i=0;$i<10;$i++) zdy();					//输出1~10
echo "<br/>";
for($i=0;$i<10;$i++) zdy2();				//输出10个1	
echo "<br/>";
?>
```

（3）全局变量的说明：全局变量可以在程序中的任何地方访问，但是在用户自定义函数内部是不 可用的。想在用户自定义函数内部使用全局变量，要使用global关键字声明。 

```php
<?php
$hr = "全局变量";			//声明一个全局变量
function lxt(){				//通过 function 关键字 声明一个函数
	$gj = "局部变量";		//声明一个局部变量 $gj
	echo $gj."<br/>";		//输出$gj; 
	global $hr;				//利用关键字global 在函数内部定义全局变量
	echo $hr.'<br/>';
}
lxt();
?>
```



## 3.可变变量

**可变变量概念**：可变变量是一种独特的变量，它允许动态改变一个变量名称。 

**可变变量的工作原理**：该变量的名称由另外一个变量的值来确定，实现过程就是在变量的 前面再多加一个美元符号“$”

**实现步骤：**

 首先定义两个变量$change_name和$trans，并且输出变量$change_name的值。 

然后使用可变变量来改变变量$change_name的名称。 

最后输出改变名称后的变量值

## 4.PHP预定义变量 

​	PHP还提供了很多非常实用的预定义变量，通过这些预定义变量可以获取到用户会话、用 户操作系统的环境和本地操作系统的环境等信息。

| 变量的名称                 | 说明                                                         |
| -------------------------- | ------------------------------------------------------------ |
| $_SERVER['SERVER_ADDR']    | 当前运行脚本所在的服务器的IP地址                             |
| $_SERVER['SERVER_NAME']    | 当前运行脚本所在服务器主机的名称。如果该脚本运行 在一个虚拟主机上，则该名称是由虚拟主机所设置的值 决定 |
| $_SERVER['REQUEST_METHOD'] | 访问页面时的请求方法。如GET、HEAD、POST、 PUT等，如果请求的方式是HEAD，PHP脚本将在送出 头信息后中止（这意味着在产生任何输出后，不再有输 出缓冲） |

## 5.常用的预定义变量 

| 变量的名称                   | 说明                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| $_SERVER['REMOTE_ADDR']      | 正在浏览当前页面用户的IP地址                                 |
| $_SERVER['REMOTE_HOST']      | 正在浏览当前页面用户的主机名。反向域名 解析基于该用户的REMOTE_ADDR |
| $_SERVER['REMOTE_PORT']      | 用户连接到服务器时所使用的端口                               |
| $_SERVER['SCRIPT_FILENAME']  | 当前执行脚本的绝对路径名。注意：如果脚 本在CLI中被执行，作为相对路径，如 file.php或者.../file.php， $_SERVER['SCRIPT_FILENAME']将包含用户 指定的相对路径 |
| $_SERVER['SERVER_PORT']      | 服务器所使用的端口，默认为80。如果使用SSL 安全连接，则这个值为用户设置的HTTP端口 |
| $_SERVER['SERVER_SIGNATURE'] | 包含服务器版本和虚拟主机名的字符串                           |
| $_SERVER['DOCUMENT_ROOT']    | 当前运行脚本所在的文档根目录。在服务器配置 文件中定义        |
| $_COOKIE                     | 通过HTTPCookie传递到脚本的信息。这些 cookie多数是由执行PHP脚本时通过setcookie() 函数设置的 |
| $_SESSION                    | 包含与所有会话变量有关的信息。$_SESSION变量主要应用于会 话控制和页面之间值的传递 |
| $_POST                       | 包含通过POST方法传递的参数的相关信息。主要用于获取通过 POST方法提交的数据 |
| $_GET                        | 包含通过GET方法传递的参数的相关信息。主要用于获取通过 GET方法提交的数据 |
| $GLOBALS                     | 由所有已定义全局变量组成的数组。变量名就是该数组的索引。 它可以称得上是所有超级变量的超级集合 |

